// Referenced workspace files:
// - [SmartAuth.AppHost](SmartAuth.AppHost/)
// - [`Program`](SmartAuth.Api/Program.cs)
// - [SmartAuth.Web](SmartAuth.Web/)
// - [SmartAuth.Infrastructure](SmartAuth.Infrastructure/)
// - [SmartAuth.Domain](SmartAuth.Domain/)
// - [SmartAuth.ServiceDefaults](SmartAuth.ServiceDefaults/)
// - [SmartAuth.Tests](SmartAuth.Tests/)

@startuml
skinparam componentStyle rectangle

package "Aspire AppHost\n[SmartAuth.AppHost]" as AppHost {
  component "Web\n[SmartAuth.Web]" as Web
  component "Api\n[SmartAuth.Api/Program.cs]" as Api
  database "Postgres\n(pgvector) (planned)" as Postgres
}

component "Infrastructure\n[SmartAuth.Infrastructure]" as Infra
component "Domain\n[SmartAuth.Domain]" as Domain
component "ServiceDefaults\n[SmartAuth.ServiceDefaults]" as ServiceDefaults
component "Tests\n[SmartAuth.Tests]" as Tests

AppHost --> Web : orchestrates
AppHost --> Api : orchestrates
AppHost --> Postgres : orchestrates

Web --> Api : HTTP/REST (SPA -> Api)
Api --> Infra : uses
Api --> Domain : uses
Api --> ServiceDefaults : telemetry / defaults
Api --> Postgres : connects to (DB)

Tests --> Api : integration / unit tests
Tests --> Infra : test helpers

note right of Postgres
  planned
end note

note right of Web
  SPA React/Vite (planned)
end note
@enduml